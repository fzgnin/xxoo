<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
	<meta name="renderer" content="webkit">
    <title>{$meta_title}|OneThink管理平台</title>
    <link href="__ROOT__/Public/favicon.ico" type="image/x-icon" rel="shortcut icon">
</head>
<body>
<link rel="stylesheet" href="__CSS__/font-awesome.min.css" type="text/css" />                       
<style type="text/css">
.bill-container {
    border: 1px solid #CFCFCF;
    box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.2);
    padding: 10px 20px 20px;
    margin-bottom: 20px;
}

*, h1, h2, h3, h4, h5, h6 {
    font-family: "Lucida Console","Monaco","Courier New","mono","monospace","Segoe UI","Lucida Grande",Helvetica,Arial,"Microsoft YaHei",FreeSans,Arimo,"Droid Sans","wenquanyi micro hei","Hiragino Sans GB","Hiragino Sans GB W3",sans-serif;
}
*, *::before, *::after {
    box-sizing: border-box;
}

html, body {
    color: #656565;
}body {
    font-family: Arial,Helvetica,sans-serif;
    font-size: 13px;
    line-height: 1.4;
    color: #333;
}
.bill-container .bill-header .bill-subject {
    height: 70px;
    margin: 0px 0px 20px;
    position: relative;
    color: #000;
    border-bottom: 1px solid #EFEFEF;
}.bill-container .bill-header .bill-subject .bill-subject-left {
    position: absolute;
    left: 0px;
    top: 0px;
    font-size: 12px;
}bill-container .bill-header .bill-subject {
    color: #000;
}.bill-container .bill-header .bill-subject .bill-subject-left .subject {
    border-right: 1px solid #666;
    padding: 5px 10px 5px 0px;
    margin-right: 10px;
}.pull-left {
    float: left !important;
}.bill-container .bill-header .bill-subject .bill-subject-left {
    font-size: 12px;
}.bill-container .bill-header .bill-subject .bill-subject-left h1 {
    font-size: 24px;
    margin: 0px;
    padding: 10px 0px;
}h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    font-weight: 500;
    line-height: 1.1;
    color: inherit;
}.bill-container .bill-header .bill-subject .bill-subject-left .subject input {
    border: 0px none;
    text-align: center;
}a, button, input {
    transition: all 0.1s ease-out 0s;
}input, button, select, textarea {
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
}.bill-container .bill-header .bill-subject .bill-subject-left .company-info {
    padding-top: 8px;
}.pull-left {
    float: left !important;
}.bill-container .bill-header .bill-subject .bill-subject-left .company-info small {
    display: block;
    margin: 1px 0px;
}small, .small {
    font-size: 85%;
}[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak, .ng-hide:not(.ng-hide-animate) {
    display: none !important;
}.bill-container .bill-header .bill-subject .bill-subject-left .company-info small {
    display: block;
    margin: 1px 0px;
}.bill-container .bill-header .bill-bar-code {
    font-size: 11px;
    color: #222;
    line-height: 180%;
    text-align: right;
    width: 400px;
    position: absolute;
    right: 0px;
    top: 10px;
}.bill-container .bill-header .bill-bar-code img {
    max-width: 100%;
}
img {
    vertical-align: middle;
}
img {
    border: 0px none;
}.bill-container .bill-header .bill-bar-code {
    font-size: 11px;
    color: #222;
    line-height: 180%;
    text-align: right;
}html, body {
    color: #656565;
}.table-bordered {
    border: 1px solid #DDD;
}.table {
    margin-bottom: 18px;
}.table {
    width: 100%;
    margin-bottom: 20px;
}table {
    background-color: transparent;
}table {
    max-width: 100%;
    background-color: transparent;
}table {
    border-collapse: collapse;
    border-spacing: 0px;
}table {
    border-collapse: collapse;
    border-spacing: 0px;
}.table > caption + thead > tr:first-child > th, .table > colgroup + thead > tr:first-child > th, .table > thead:first-child > tr:first-child > th, .table > caption + thead > tr:first-child > td, .table > colgroup + thead > tr:first-child > td, .table > thead:first-child > tr:first-child > td {
    border-top: 0px none;
}.table-bordered > thead > tr > th, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > tbody > tr > td, .table-bordered > tfoot > tr > td {
    border: 1px solid #DDD;
}.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
    line-height: 1.4;
    border-top: 1px solid #DDD;
}.table > thead > tr > th {
    vertical-align: bottom;
    border-bottom: 2px solid #DDD;
}.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
    padding: 8px;
    line-height: 1.42857;
    vertical-align: top;
    border-top: 1px solid #DDD;
}.bill-rows table th {
    background: #F2F2F2 none repeat scroll 0% 0%;
}th {
    text-align: left;
}.bill-rows table th label {
    margin-bottom: 0px;
}label {
    display: inline-block;
    margin-bottom: 5px;
    font-weight: bold;
}[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak, .ng-hide:not(.ng-hide-animate) {
    display: none !important;
}.pull-right {
    float: right !important;
}.dropdown {
    position: relative;
}a, a:hover, a:active {
    text-decoration: none;
    cursor: pointer;
}a, button, input {
    transition: all 0.1s ease-out 0s;
}a {
    color: #15C;
}a {
    background: transparent none repeat scroll 0% 0%;
}.fa {
    display: inline-block;
    font-family: FontAwesome;
    font-style: normal;
    font-weight: normal;
    line-height: 1;
    font-size-adjust: none;
    font-stretch: normal;
    font-feature-settings: normal;
    font-language-override: normal;
    font-kerning: auto;
    font-synthesis: weight style;
    font-variant: normal;
    font-size: inherit;
    text-rendering: auto;
    transform: translate(0px, 0px);
}.pull-right > .dropdown-menu {
    right: 0px;
    left: auto;
}.dropdown-menu {
    padding: 6px 0px;
    margin: 1px 0px 0px;
    font-size: 13px;
    background-color: #FFF;
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 0px;
    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);
}.dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0px;
    z-index: 1000;
    display: none;
    float: left;
    min-width: 160px;
    padding: 5px 0px;
    margin: 2px 0px 0px;
    font-size: 14px;
    list-style: outside none none;
    background-color: #FFF;
    border: 1px solid rgba(0, 0, 0, 0.15);
    border-radius: 4px;
    box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.176);
    background-clip: padding-box;
}.table-bordered > thead > tr > th, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > tbody > tr > td, .table-bordered > tfoot > tr > td {
    border: 1px solid #DDD;
}.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
    line-height: 1.4;
    border-top: 1px solid #DDD;
}.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
    padding: 8px;
    line-height: 1.42857;
    vertical-align: top;
    border-top: 1px solid #DDD;
}.text-center {
    text-align: center;
}.bill-rows table .operations-td i {
    margin: 0px 3px;
    cursor: pointer;
}.fa-plus::before {
    content: "";
}.bill-rows table .operations-td i {
    cursor: pointer;
}.fa-trash-o::before {
    content: "";
}.bill-rows table td[bill-edit-able] {
    padding: 0px;
    position: relative;
}.bill-footer-input {
    margin-left: 0px;
}.bill-footer-input .bill-footer-input-item {
    margin: 8px 15px 10px 0px;
    float: left;
    width: 300px;
}.input-group {
    position: relative;
    display: table;
    border-collapse: separate;
}.bill-footer-input .bill-footer-input-item .input-group-addon {
    height: 30px;
}.input-group-addon:first-child {
    border-right: 0px none;
}.input-group .form-control:last-child, .input-group-addon:last-child, .input-group-btn:last-child > .btn, .input-group-btn:last-child > .dropdown-toggle, .input-group-btn:first-child > .btn:not(:first-child) {
    border-bottom-left-radius: 0px;
    border-top-left-radius: 0px;
}.bill-footer-input .bill-footer-input-item {
    margin: 8px 15px 10px 0px;
    float: left;
    width: 300px;
}.input-group {
    position: relative;
    display: table;
    border-collapse: separate;
}.bill-footer-input .bill-footer-input-item .input-group-addon {
    height: 30px;
}.input-group-addon:first-child {
    border-right: 0px none;
}.dl-horizontal dd::before, .dl-horizontal dd::after, .container::before, .container::after, .container-fluid::before, .container-fluid::after, .row::before, .row::after, .form-horizontal .form-group::before, .form-horizontal .form-group::after, .btn-toolbar::before, .btn-toolbar::after, .btn-group-vertical > .btn-group::before, .btn-group-vertical > .btn-group::after, .nav::before, .nav::after, .navbar::before, .navbar::after, .navbar-header::before, .navbar-header::after, .navbar-collapse::before, .navbar-collapse::after, .pager::before, .pager::after, .panel-body::before, .panel-body::after, .modal-footer::before, .modal-footer::after {
    content: " ";
    display: table;
}.input-group .form-control:first-child, .input-group-addon:first-child, .input-group-btn:first-child > .btn, .input-group-btn:first-child > .dropdown-toggle, .input-group-btn:last-child > .btn:not(:last-child):not(.dropdown-toggle) {
    border-top-right-radius: 0px;
    border-bottom-right-radius: 0px;
}.input-group-addon {
    padding: 5px 8px;
    font-size: 13px;
    color: #555;
    border-width: 1px;
    border-style: solid;
    border-color: #C0C0C0 #D9D9D9 #D9D9D9;
    -moz-border-top-colors: none;
    -moz-border-right-colors: none;
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    border-image: none;
    border-radius: 2px;
}.input-group-addon, .input-group-btn, .input-group .form-control {
    margin: 0px;
    border-radius: 0px;
}.input-group-addon {
    padding: 6px 12px;
    font-size: 14px;
    font-weight: normal;
    line-height: 1;
    color: #555;
    text-align: center;
    background-color: #EEE;
    border: 1px solid #CCC;
    border-radius: 4px;
}.input-group-addon, .input-group-btn {
    width: 1%;
    white-space: nowrap;
    vertical-align: middle;
}.input-group-addon, .input-group-btn, .input-group .form-control {
    display: table-cell;
}.input-group {
    border-collapse: separate;
}.input-group .form-control:last-child, .input-group-addon:last-child, .input-group-btn:last-child > .btn, .input-group-btn:last-child > .dropdown-toggle, .input-group-btn:first-child > .btn:not(:first-child) {
    border-bottom-left-radius: 0px;
    border-top-left-radius: 0px;
}.input-group-addon, .input-group-btn, .input-group .form-control {
    margin: 0px;
    border-radius: 0px;
}.input-group-addon, .input-group-btn, .input-group .form-control {
    display: table-cell;
}
.input-group .form-control {
    width: 100%;
    margin-bottom: 0px;
}
.form-control {
    height: 30px;
    padding: 5px 8px;
    font-size: 13px;
    line-height: 1.4;
    background-color: #FFF;
    border-width: 1px;
    border-style: solid;
    border-color: #C0C0C0 #D9D9D9 #D9D9D9;
    -moz-border-top-colors: none;
    -moz-border-right-colors: none;
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    border-image: none;
    border-radius: 1px;
    box-shadow: none;
    transition: none 0s ease 0s;
}
.form-control {
    display: block;
    width: 100%;
    height: 34px;
    padding: 6px 12px;
    font-size: 14px;
    line-height: 1.42857;
    color: #555;
    vertical-align: middle;
    background-color: #FFF;
    background-image: none;
    border: 1px solid #CCC;
    border-radius: 4px;
    box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.075) inset;
    transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
}input, button, select, textarea {
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
}.input-group .form-control:first-child, .input-group-addon:first-child, .input-group-btn:first-child > .btn, .input-group-btn:first-child > .dropdown-toggle, .input-group-btn:last-child > .btn:not(:last-child):not(.dropdown-toggle) {
    border-top-right-radius: 0px;
    border-bottom-right-radius: 0px;
}.bill-footer-input .bill-footer-input-item .input-group-addon {
    height: 30px;
}
.input-group-addon:first-child {
    border-right: 0px none;
}.bill-footer .bill-footer-meta {
    margin-bottom: 20px;
}.bill-footer .bill-footer-meta .label {
    margin-right: 5px;
    padding: 5px 5px 4px;
    font-weight: normal;
}
.label-primary {
    background-color: #4D90FE;
}
.label {
    font-size: 80%;
    border-radius: 0px;
}.label {
    display: inline;
    padding: 0.2em 0.6em 0.3em;
    font-size: 75%;
    font-weight: bold;
    line-height: 1;
    color: #FFF;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: 0.25em;
}.bill-footer .bill-footer-meta .label {
    font-weight: normal;
}
.label {
    font-size: 80%;
}
.label {
    font-size: 75%;
    font-weight: bold;
    line-height: 1;
    color: #FFF;
    text-align: center;
    white-space: nowrap;
}.pull-right {
    float: right !important;
}.btn {
    font-weight: normal;
}
.btn-lg {
    padding: 9px 14px;
    font-size: 14px;
    line-height: 1.3;
    border-radius: 2px;
}
.btn-primary {
    color: #FFF;
    text-shadow: 0px 1px rgba(0, 0, 0, 0.1);
    background-image: linear-gradient(to bottom, #4D90FE 0%, #4787ED 100%);
    background-repeat: repeat-x;
    border: 1px solid #3079ED;
}
.btn {
    padding: 5px 12px;
    font-size: 13px;
    font-weight: bold;
    line-height: 18px;
    cursor: default;
    border-radius: 2px;
    box-shadow: none;
    background-clip: border-box;
}
.btn-lg {
    padding: 10px 16px;
    font-size: 18px;
    line-height: 1.33;
    border-radius: 6px;
}
.btn-primary {
    color: #FFF;
    background-color: #428BCA;
    border-color: #357EBD;
}
.btn {
    display: inline-block;
    padding: 6px 12px;
    margin-bottom: 0px;
    font-size: 14px;
    font-weight: normal;
    line-height: 1.42857;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    cursor: pointer;
    background-image: none;
    border: 1px solid transparent;
    border-radius: 4px;
    -moz-user-select: none;
}
a, button, input {
    transition: all 0.1s ease-out 0s;
}
input, button, select, textarea {
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
}

.td_huang{padding:0px !important;width:200px !important}
.form-huang{
padding:0px; border:none!important;border-radius:0px!important;width:100% !important
}
</style>
<div class="bill-container ng-scope">
    <div class="ng-scope" ><div class="bill-header ng-scope">
    <div class="bill-subject">
        <div class="bill-subject-left">
            <div class="subject pull-left">
                <h1>
                    <input value="<eq name="order_info.order_type" value="7">库存盘点单<else/>库存初始单</eq>" type="text">
                </h1>
            </div>
            <div class="company-info pull-left">
                <small class="ng-binding" ng-bind="system_preference.company_name" ng-show="system_preference.company_name"><eq name="order_info.order_type" value="7">上海国际雅兰库存盘点单<else/>上海国际雅兰库存初始单</eq></small>
            </div>
        </div>
        <div class="bill-bar-code" id="bar-code"></div>
    </div>
</div>

<div class="bill-footer-input row">
            <div class="bill-footer-input-item">
                <div class="input-group ng-scope">
				<span class="input-group-addon">录单日期</span>
				<span class="form-control input_widget_number ng-pristine ng-untouched ng-valid">{$order_info.add_time|date='Y-m-d',###}</span>
				</div>
            </div>
			
			<div class="bill-footer-input-item">
                <div class="input-group ng-scope">
				<span class="input-group-addon"><eq name="order_info.order_type" value="7">盘点单编号<else/>初始单编号</eq></span>
				<span class="form-control input_widget_number ng-pristine ng-untouched ng-valid">{$order_info.order_sn}</span>
				</div>
            </div>
			
		
           
            <div class="bill-footer-input-item">
                <div class="input-group ng-scope">
				<span class="input-group-addon"><eq name="order_info.order_type" value="7">盘点仓库<else/>初始化仓库</eq></span>
				<span class="form-control input_widget_number ng-pristine ng-untouched ng-valid">{$order_info.warehouse}</span>
				</div>
            </div>
			
			<div class="bill-footer-input-item">
                <div class="input-group ng-scope">
				<span class="input-group-addon"><eq name="order_info.order_type" value="7">盘点人<else/>录单人</eq></span>
				<span class="form-control input_widget_number ng-pristine ng-untouched ng-valid">{$order_info.username}</span>
				</div>
            </div>
			
			<div class="input-group bill-footer-input-item" style="width: auto">
                <span class="input-group-addon ng-binding" ng-bind="'common.Remark'|lang">备注</span>
                <span class="form-control input_widget_number ng-pristine ng-untouched ng-valid">{$order_info.remarks}</span>
            </div>
        </div>
</div>
    <div class="bill-body">
        <div config="bill_config" class="bill-rows ng-isolate-scope">
    <table class="table table-bordered bill-rows-table">
        <thead>
            <tr>
                
                <th class="text-center" width="50">#</th>
                <th class="ng-scope" >
                    <label class="ng-binding">商品编号</label>      
                </th><th class="ng-scope" >
                    <label class="ng-binding">商品全名</label>         
                </th><th class="ng-scope" >
                    <label class="ng-binding">规格</label>     
                </th><th class="ng-scope" >
                    <label class="ng-binding">报单库存数量</label>    
                </th><th class="ng-scope" >
                    <label class="ng-binding">盘点数量</label>      
                </th><th class="ng-scope" >
                    <label class="ng-binding">盈亏数量</label>      
                </th><th class="ng-scope" >
                    <label class="ng-binding">现有库存数量</label>      
                </th>
				<th class="ng-scope" >
                    <label class="ng-binding">成本价</label>      
                </th>
				<th class="ng-scope" >
                    <label class="ng-binding">盈亏金额</label>      
                </th>
				
            </tr>
        </thead>
        <tbody id="tbody_id">
		<volist name="goods_list" id="vo">
            <tr>
                <td class="text-center">#<span class="paixu">{$key+1}</span></td>
                <td >{$vo.code}</td>
				<td>{$vo.goodsname}</td>
				<td>{$vo.format}</td>
				<td>{$vo.num}</td>
				<td>{$vo.n_num}</td>
				<td>{$vo.l_num}</td>
				<td>{$vo.s_num}</td>
				<td>{$vo.price}</td>
				<td></td>
            </tr>
			</volist>
        </tbody>
        <tfoot>
            <tr>
               <td colspan="2" align="center"><strong class="ng-binding">合计</strong></td>
               
			   <td class="ng-scope"></td>
			   <td class="ng-scope"></td>
			   
			   <td class="ng-scope">
			   <span id="total_num"></span>
			   </td>
			   <td class="ng-scope">
			   <span id="total_n_num"></span>
			   </td>
			   <td class="ng-scope">
			   <span id="total_l_num"></span>
			   </td>
			   <td class="ng-scope">
			   <span id="total_s_num"></span>
			   </td>
			   <td class="ng-scope">
			   </td>
			   <td class="ng-scope">
			   <span id="total_price"></span>
			   </td>
			   
            </tr>
        </tfoot>
    </table>
</div>
    </div>
<div style="text-align:center"><a style="display: inline-block;
margin-right: 5px;
padding: 8px 10px;
font-size: 14px;
line-height: 18px;
color: #edffd1;
text-align: center;
vertical-align: middle;
cursor: pointer;
border: 0 none;
background-color: #9100BD;
*outline: 0 none;
border-radius: 3px;" onClick="parent.posting_insert({$order_info.id},{$order_info.order_type})">确认过账</a></div>
</div>

<script type="text/javascript">
fff();
function fff()
{
  var sdf = document.getElementById('tbody_id');
  
  var sd_tr = sdf.getElementsByTagName('tr');
  
  var a_num = 0;
  var a_n_num = 0;
  var a_l_num = 0;
  var a_s_num = 0;
  var total_price = 0;
  
  
  for(i=0;i<sd_tr.length;i++)
  {
	a_num = accAdd(parseInt(sd_tr[i].getElementsByTagName('td')[4].innerHTML),a_num);
	a_n_num = accAdd(parseInt(sd_tr[i].getElementsByTagName('td')[5].innerHTML),a_n_num);
	a_l_num = accAdd(parseInt(sd_tr[i].getElementsByTagName('td')[6].innerHTML),a_l_num);
	a_s_num = accAdd(parseInt(sd_tr[i].getElementsByTagName('td')[7].innerHTML),a_s_num);
	sd_tr[i].getElementsByTagName('td')[9].innerHTML = accMul(parseInt(sd_tr[i].getElementsByTagName('td')[6].innerHTML),parseFloat(sd_tr[i].getElementsByTagName('td')[8].innerHTML));
	total_price = accAdd(parseFloat(sd_tr[i].getElementsByTagName('td')[9].innerHTML),total_price);
  }
  
  document.getElementById('total_num').innerHTML = a_num;
  document.getElementById('total_n_num').innerHTML = a_n_num;
  document.getElementById('total_l_num').innerHTML = a_l_num;
  document.getElementById('total_s_num').innerHTML = a_s_num;
  
  
  document.getElementById('total_price').innerHTML = total_price;
  
  
}


//乘
function accMul(arg1,arg2)   
{   
    var m=0,s1=arg1.toString(),s2=arg2.toString();   
    try{m+=s1.split(".")[1].length}catch(e){}   
    try{m+=s2.split(".")[1].length}catch(e){}   
    return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m)   
}   
 //除 
function accDiv(arg1,arg2){   
    var t1=0,t2=0,r1,r2;   
    try{t1=arg1.toString().split(".")[1].length}catch(e){}   
    try{t2=arg2.toString().split(".")[1].length}catch(e){}   
    with(Math){   
    r1=Number(arg1.toString().replace(".",""))   
    r2=Number(arg2.toString().replace(".",""))   
    return (r1/r2)*pow(10,t2-t1);   
    }   
}   
//加
function accAdd(arg1,arg2){      
   var r1,r2,m;      
   try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}    
   try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}     
        m=Math.pow(10,Math.max(r1,r2))  
        return (accMul(arg1,m)+accMul(arg2,m))/m      
}
//减       
function accSub(arg1,arg2){      
   var r1,r2,m;      
   try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}    
   try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}     
        m=Math.pow(10,Math.max(r1,r2))  
        return (accMul(arg1,m)-accMul(arg2,m))/m      
}  
</script>

   
</body>
</html>